{
  $schema: 'https://docs.renovatebot.com/renovate-schema.json',
  extends: [
    'config:recommended',
    'group:allNonMajor',
  ],
  labels: [
    'dependencies',
  ],
  terraform: {
    ignorePaths: [
      '**/examples/**',
    ],
  },
  helmv3: {
    managerFilePatterns: [
      '/helm-values/.+\\.ya?ml$/',
    ],
  },
  customManagers: [
    {
      customType: 'regex',
      managerFilePatterns: [
        '/^modules/k8s-core/variables\\.tf$/',
      ],
      matchStrings: [
        'variable "(?<depName>aws_efs_csi_driver_chart_version)"\\s*\\{[^}]*default\\s*=\\s*"(?<currentValue>[^"]+)"[^}]*\\}',
      ],
      datasourceTemplate: 'helm',
      depNameTemplate: 'aws-efs-csi-driver',
      registryUrlTemplate: 'https://kubernetes-sigs.github.io/aws-efs-csi-driver/',
    },
    {
      customType: 'regex',
      managerFilePatterns: [
        '/^environments/.+/main\\.tf$/',
      ],
      matchStrings: [
        '\\s+aws_efs_csi_driver_chart_version\\s*=\\s*"(?<currentValue>[^"]+)"',
      ],
      datasourceTemplate: 'helm',
      depNameTemplate: 'aws-efs-csi-driver',
      registryUrlTemplate: 'https://kubernetes-sigs.github.io/aws-efs-csi-driver/',
    },
    {
      customType: 'regex',
      managerFilePatterns: [
        '/^modules/k8s-core/variables\\.tf$/',
      ],
      matchStrings: [
        'variable "(?<depName>secrets_store_csi_driver_chart_version)"\\s*\\{[^}]*default\\s*=\\s*"(?<currentValue>[^"]+)"[^}]*\\}',
      ],
      datasourceTemplate: 'helm',
      depNameTemplate: 'secrets-store-csi-driver',
      registryUrlTemplate: 'https://kubernetes-sigs.github.io/secrets-store-csi-driver/charts',
    },
    {
      customType: 'regex',
      managerFilePatterns: [
        '/^environments/.+/main\\.tf$/',
      ],
      matchStrings: [
        '\\s+secrets_store_csi_driver_chart_version\\s*=\\s*"(?<currentValue>[^"]+)"',
      ],
      datasourceTemplate: 'helm',
      depNameTemplate: 'secrets-store-csi-driver',
      registryUrlTemplate: 'https://kubernetes-sigs.github.io/secrets-store-csi-driver/charts',
    },
    {
      customType: 'regex',
      managerFilePatterns: [
        '/^modules/k8s-core/variables\\.tf$/',
      ],
      matchStrings: [
        'variable "(?<depName>secrets_store_csi_driver_provider_aws_chart_version)"\\s*\\{[^}]*default\\s*=\\s*"(?<currentValue>[^"]+)"[^}]*\\}',
      ],
      datasourceTemplate: 'helm',
      depNameTemplate: 'secrets-store-csi-driver-provider-aws',
      registryUrlTemplate: 'https://aws.github.io/secrets-store-csi-driver-provider-aws/',
    },
    {
      customType: 'regex',
      managerFilePatterns: [
        '/^environments/.+/main\\.tf$/',
      ],
      matchStrings: [
        '\\s+secrets_store_csi_driver_provider_aws_chart_version\\s*=\\s*"(?<currentValue>[^"]+)"',
      ],
      datasourceTemplate: 'helm',
      depNameTemplate: 'secrets-store-csi-driver-provider-aws',
      registryUrlTemplate: 'https://aws.github.io/secrets-store-csi-driver-provider-aws/',
    },
    {
      customType: 'regex',
      managerFilePatterns: [
        '/^modules/k8s-core/variables\\.tf$/',
      ],
      matchStrings: [
        'variable "(?<depName>aws_load_balancer_controller_chart_version)"\\s*\\{[^}]*default\\s*=\\s*"(?<currentValue>[^"]+)"[^}]*\\}',
      ],
      datasourceTemplate: 'helm',
      depNameTemplate: 'aws-load-balancer-controller',
      registryUrlTemplate: 'https://aws.github.io/eks-charts/',
    },
    {
      customType: 'regex',
      managerFilePatterns: [
        '/^environments/.+/main\\.tf$/',
      ],
      matchStrings: [
        '\\s+aws_load_balancer_controller_chart_version\\s*=\\s*"(?<currentValue>[^"]+)"',
      ],
      datasourceTemplate: 'helm',
      depNameTemplate: 'aws-load-balancer-controller',
      registryUrlTemplate: 'https://aws.github.io/eks-charts/',
    },
    {
      customType: 'regex',
      managerFilePatterns: [
        '/^modules/k8s-core/variables\\.tf$/',
      ],
      matchStrings: [
        'variable "(?<depName>metrics_server_chart_version)"\\s*\\{[^}]*default\\s*=\\s*"(?<currentValue>[^"]+)"[^}]*\\}',
      ],
      datasourceTemplate: 'helm',
      depNameTemplate: 'metrics-server',
      registryUrlTemplate: 'https://kubernetes-sigs.github.io/metrics-server/',
    },
    {
      customType: 'regex',
      managerFilePatterns: [
        '/^environments/.+/main\\.tf$/',
      ],
      matchStrings: [
        '\\s+metrics_server_chart_version\\s*=\\s*"(?<currentValue>[^"]+)"',
      ],
      datasourceTemplate: 'helm',
      depNameTemplate: 'metrics-server',
      registryUrlTemplate: 'https://kubernetes-sigs.github.io/metrics-server/',
    },
    {
      customType: 'regex',
      managerFilePatterns: [
        '/^modules/k8s-core/variables\\.tf$/',
      ],
      matchStrings: [
        'variable "(?<depName>cluster_autoscaler_chart_version)"\\s*\\{[^}]*default\\s*=\\s*"(?<currentValue>[^"]+)"[^}]*\\}',
      ],
      datasourceTemplate: 'helm',
      depNameTemplate: 'cluster-autoscaler',
      registryUrlTemplate: 'https://kubernetes.github.io/autoscaler/',
    },
    {
      customType: 'regex',
      managerFilePatterns: [
        '/^environments/.+/main\\.tf$/',
      ],
      matchStrings: [
        '\\s+cluster_autoscaler_chart_version\\s*=\\s*"(?<currentValue>[^"]+)"',
      ],
      datasourceTemplate: 'helm',
      depNameTemplate: 'cluster-autoscaler',
      registryUrlTemplate: 'https://kubernetes.github.io/autoscaler/',
    },
  ],
  packageRules: [
    {
      matchUpdateTypes: [
        'major',
      ],
      automerge: false,
      addLabels: [
        'major',
      ],
    },
    {
      matchUpdateTypes: [
        'minor',
      ],
      automerge: false,
      addLabels: [
        'minor',
      ],
    },
    {
      matchUpdateTypes: [
        'patch',
      ],
      automerge: false,
      addLabels: [
        'patch',
      ],
    },
    {
      matchDatasources: [
        'terraform',
      ],
      automerge: false,
      addLabels: [
        'terraform',
      ],
    },
    {
      matchDatasources: [
        'helm',
      ],
      automerge: false,
      addLabels: [
        'helm',
      ],
    },
    {
      matchDatasources: [
        'github-actions',
      ],
      automerge: false,
      addLabels: [
        'github-actions',
      ],
    }
  ],
  platform: 'github',
  repositories: [
    'cazlo/k8s-renovate',
  ],
  semanticCommits: 'enabled',
  enabledManagers: [
    'github-actions',
    'poetry',
    'dockerfile',
    'custom.regex',
    'terraform',
    'terragrunt',
    'helmv3',
    'helmfile',
    'helm-requirements',
    'kubernetes',
  ],
}
